webpackJsonp([1],{"1MQj":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a=o("weH4"),i=o.n(a),s=o("N3ez"),n=o.n(s),r=t.extend({name:"project",template:i.a,props:["project","index"],methods:{modal:function(t){this.$store.dispatch("modal",t)},edit:function(t){this.modal({show:!0,type:"default",options:{},data:{project:this.project,index:this.index},component:n.a})}}});e.default=r}).call(e,o("I3G/"))},IlWp:function(t,e,o){var a,i={};a=o("WNDt"),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default);var s="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s.computed||(s.computed={}),Object.keys(i).forEach(function(t){var e=i[t];s.computed[t]=function(){return e}})},KJ6L:function(t,e,o){"use strict";(function(t){var o=new t;e.a=o}).call(e,o("I3G/"))},N3ez:function(t,e,o){var a,i={};a=o("tZp2"),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default);var s="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s.computed||(s.computed={}),Object.keys(i).forEach(function(t){var e=i[t];s.computed[t]=function(){return e}})},NqvB:function(t,e,o){var a,i={};a=o("1MQj"),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default);var s="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s.computed||(s.computed={}),Object.keys(i).forEach(function(t){var e=i[t];s.computed[t]=function(){return e}})},SAhC:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a=o("TZB4"),i=o.n(a),s=t.extend({template:i.a,name:"project-header",computed:{user:function(){return this.$store.state.user}},mounted:function(){this.getUser()},methods:{login:function(t){this.$router.push({path:"/login"})},logout:function(){this.$store.dispatch("logout")},getUser:function(){this.$store.dispatch("user")}}});e.default=s}).call(e,o("I3G/"))},TZB4:function(t,e){t.exports='<nav class="navbar navbar-default navbar-fixed-top"> <div class=container> <div class=navbar-header> <a class=navbar-brand href=#>Mock Server</a> </div> <div id=navbar class="collapse navbar-collapse"> <ul class="nav navbar-nav navbar-right"> <li class=active> <a href=/ >Home</a> </li> <li> <a href=https://github.com/vvpvvp/UMock#readme target=_blank>文档</a> </li> <li class=dropdown> <a href=javascript:void(0) @click=login v-if=!user.id>登录</a> <a class=dropdown-toggle data-toggle=dropdown href=# v-if=user.id> <i class="fa fa-user fa-fw"></i> {{user.name}} <i class="fa fa-caret-down"></i> </a> <ul class="dropdown-menu dropdown-user" v-if=user.id> <li> <a href=javascript:void(0) @click=logout> <i class="fa fa-sign-out fa-fw"></i> 注销</a> </li> </ul> </li> </ul> </div> </div> </nav> '},Uyhh:function(t,e,o){var a,i={};a=o("SAhC"),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default);var s="function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports;s.computed||(s.computed={}),Object.keys(i).forEach(function(t){var e=i[t];s.computed[t]=function(){return e}})},WNDt:function(t,e,o){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0});var i=o("gWBi"),s=o.n(i),n=o("Uyhh"),r=o.n(n),c=o("NqvB"),l=o.n(c),d=o("N3ez"),p=o.n(d),u=o("k06x"),f=o("KJ6L"),v=t.extend({name:"project-list",template:s.a,components:{projectHeader:r.a,project:l.a},data:function(){return{projects:[],loading:{fetch:!1}}},created:function(){f.a.$on("removeProject",this.modify),f.a.$on("modifyProject",this.modify),f.a.$on("addProject",this.add)},beforeDestroy:function(){f.a.$off("removeProject",this.modify),f.a.$off("modifyProject",this.modify),f.a.$off("addProject",this.add)},methods:{alert:function(t){this.$store.dispatch("alert",t)},modal:function(t){this.$store.dispatch("modal",t)},fetch:function(){var t=this;t.loading.fetch||(t.loading.fetch=!t.loading.fetch,a.ajax({url:u.a.projectlist}).done(function(e){t.projects=e}).fail(function(e){t.alert({show:!0,msg:e.responseText||"获取mockapi列表失败",type:"error"})}).always(function(){t.loading.fetch=!t.loading.fetch}))},modify:function(t,e){e?this.projects.splice(t,1,e):this.projects.splice(t,1)},add:function(t){this.projects.push(t)},addProject:function(){this.modal({show:!0,type:"default",options:{},component:p.a})}},mounted:function(){this.fetch()}});e.default=v}).call(e,o("I3G/"),o("7t+N"))},gWBi:function(t,e){t.exports='<div> <project-header></project-header> <div class="container wrapper"> <div class=page-header> <h3>项目<span class="glyphicon glyphicon-plus newProject" @click=addProject>创建项目</span> </h3> </div> <div class=projectlist> <div v-for="(project, index) in projects" :key=project._id> <project :project=project :index=index></project> </div> </div> <div class=empty v-if="!loading.fetch && projects.length == 0"> <div class=msg>还没有配置api，赶紧配置一个</div> </div> <div v-if=loading.fetch> <div class="loading audio-wave"></div> </div> </div> </div> '},oXYe:function(t,e){t.exports='<div class=modal-content> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=Close> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title id=exampleModalLabel>项目</h4> </div> <div class=modal-body> <div class=form-group> <label for=recipient-name class=control-label>项目名称:</label> <input type=text class=form-control v-model=project.name> </div> <div class=form-group> <label for=recipient-name class=control-label>描述:</label> <input type=text class=form-control v-model=project.desc> </div> <div class=form-group> <label for=recipient-name class=control-label>种类:</label> </div> <div class=form-group> <label class=radio-inline> <input type=radio name=type v-model=project.isPublic value=1> URL前缀 </label> <label class=radio-inline> <input type=radio name=type v-model=project.isPublic value=0> HEAD参数 </label> </div> <div class=form-group> <label for=recipient-name class=control-label>前缀区分/设定HEAD的author参数:</label> <input type=text class=form-control v-model=project.beginPath> </div> <div class=form-group> <label for=recipient-name class=control-label>反向代理地址:</label> <input type=text class=form-control v-model=project.proxy> </div> </div> <div class=modal-footer> <button type=button v-if=editing class="btn btn-danger" id=editButton @click=remove>删除</button> <button type=button class="btn btn-primary" id=editButton @click=save>保存</button> <button type=button class="btn btn-default _close" data-dismiss=modal>关闭</button> </div> </div> '},tZp2:function(t,e,o){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0});var i=o("oXYe"),s=o.n(i),n=o("k06x"),r=o("KJ6L"),c=t.extend({name:"project-edit",template:s.a,props:["data"],data:function(){return{project:{_id:"",name:"",desc:"",beginPath:"",isPublic:"1",proxy:""},editing:!1,loading:{post:!1,delete:!1}}},mounted:function(){this.data&&(Object.assign(this.project,this.data.project),this.index=this.data.index,this.editing=!0)},methods:{alert:function(t){this.$store.dispatch("alert",t)},save:function(){if(""===this.project.name||""===this.project.beginPath||""===this.project.proxy)return t.alert({show:!0,msg:"参数不全",type:"error"}),!1;if(1==this.project.beginPath.isPublic&&0!==this.project.beginPath.indexOf("/"))return t.alert({show:!0,msg:"url前缀必须以/开头",type:"error"}),!1;if(this.project.beginPath.indexOf("/_system")!=-1)return t.alert({show:!0,msg:"url前缀不能以/_system开头，与系统接口冲突，同时下划线命名不规范",type:"error"}),!1;var t=this;if(!t.loading.post){t.loading.post=!t.loading.post;var e=n.a.project;t.editing&&(e=e+"/"+t.project._id),a.ajax({url:e,type:"post",data:JSON.stringify(t.project)}).done(function(e){t.editing?r.a.$emit("modifyProject",t.index,t.project):r.a.$emit("addProject",e),a(t.$el).find("._close").click()}).fail(function(e){t.alert({show:!0,msg:e.responseText||"修改项目失败",type:"error"})}).always(function(){t.loading.post=!t.loading.post})}},remove:function(){var t=this;t.loading.delete||(t.loading.delete=!t.loading.delete,confirm("确定删除")&&a.ajax({url:n.a.project+"/"+this.project._id,type:"DELETE"}).fail(function(e){t.alert({show:!0,msg:e.responseText||"删除项目失败",type:"error"})}).done(function(e){r.a.$emit("removeProject",t.index),a(t.$el).find("._close").click()}).always(function(){t.loading.delete=!t.loading.delete}))}}});e.default=c}).call(e,o("I3G/"),o("7t+N"))},weH4:function(t,e){t.exports='<div :class="[\'alert-gray\',\'alert-success\'][project.isPublic]" role=alert class="project alert"> <h4> <span class=label :class="[\'label-primary\',\'label-success\'][project.isPublic]"> {{project.beginPath}} </span> <router-link :to="{name:\'mockSet\' ,params:{id:project._id}}" class=alert-link> {{project.name}} - {{["HEAD参数","URL前缀"][project.isPublic]}} </router-link> <span class="pointer glyphicon glyphicon-edit" @click=edit(project)></span> </h4> <p>{{project.desc}}</p> </div> '}});
//# sourceMappingURL=1.563b6945e633d441d441.js.map